# AGL Cross-Compilation SDK

This document provides instructions for building and installing the Automotive Grade Linux (AGL) Software Development Kit (SDK) for cross-compilation. It is a continuation of the [AGL Build Documentation](./AGL_Build.md) and assumes you have already set up your build environment and successfully built an AGL image as described in that document.

## 1. SDK Configuration

Before building the SDK, you need to add specific features to your build configuration to include package management and development packages.

Add the following lines to your `build/conf/local.conf` file:

```bash
# Add package management to the image, required for the SDK
IMAGE_FEATURES += "package-management"

# Add development and static development packages to the SDK
SDKIMAGE_FEATURES += "dev-pkgs staticdev-pkgs"
```

## 2. Building the SDK

The SDK is generated by using the `populate_sdk` task in `bitbake`. You can build a generic toolchain or one that is specific to your target image. For this guide, we will build the SDK for the `agl-image-minimal-crosssdk` image created in the previous document.

Run the following command from your build directory:

```bash
bitbake agl-image-minimal-crosssdk -c populate_sdk
```

This command will build the toolchain and package it into a self-extracting installer script.

## 3. Installing the SDK

Once the build process is complete, the SDK installer will be located in the `build/tmp/deploy/sdk/` directory.

1.  Navigate to the SDK output directory:
    ```bash
    cd tmp/deploy/sdk/
    ```

2.  Run the installer script. You may need to use `sudo` to install it in a system-wide location like `/opt`. The script name will vary based on the build version and architecture.

    ```bash
    # Example installer script name
    sudo ./poky-agl-glibc-x86_64-agl-image-minimal-crosssdk-aarch64-raspberrypi5-toolchain-x.x.x.sh
    ```
    The installer will prompt you for an installation path. The default is often `/opt/agl-sdk/`.

## 4. Using the SDK

After the installation is complete, you need to source the environment setup script to configure your shell with the cross-compilation toolchain and variables.

Source the environment script from the directory where you installed the SDK. For example, if you installed it to the default location, the command would be:

```bash
source /opt/agl-sdk/20.0.1-aarch64/environment-setup-aarch64-agl-linux
```

Your shell is now configured to use the AGL cross-compiler, allowing you to build applications for your Raspberry Pi 5 target directly from your host machine.
